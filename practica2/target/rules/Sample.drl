package com.sample
 
import com.sample.DroolsTest.Node;
import com.sample.DroolsTest.Edge;
import com.sample.DroolsTest.Path;

rule "Path Direct" salience 10
	when
		$ini : Node()
		$fin : Node()
		$e : Edge(initialNode == $ini, finalNode == $fin)
		p : Path(ini == $ini, fin == $fin)
		
	then
		$ini.setStatus(Node.VISITED);
		$fin.setStatus(Node.VISITED);
		p.getPath().add($e);
		System.out.println("PATH DIRECT INI: " + $e.getInitialNode().getValue() + " ; FIN: " + $e.getFinalNode().getValue());	
end

rule "Path Indirect" salience 10
	when
		p : Path()
		$ini : Node(status == Node.NOT_VISITED)
		$inter : Node(status == Node.NOT_VISITED)
		$fin : Node(status == Node.NOT_VISITED)
		$e : Edge(initialNode == $ini, finalNode == $inter)
		$p1 : Path(ini == $inter, fin == $fin)
	then
		$ini.setStatus(Node.VISITED);
		$inter.setStatus(Node.VISITED);
		p.getPath().add($e);
		System.out.println("PATH INDIRECT INI: \n" + p.toString());	
		
		
end

